<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 æ–°æ‰‹æŠ€æœ¯æ ˆé€è§†æŒ‡å— (å®æˆ˜ç»ˆæç‰ˆ)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background-color: #f8fafc; /* Slate-50 */
            color: #334155;
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex: 1; /* Push footer to bottom */
        }
        /* Card Styles */
        .tech-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border-bottom-width: 4px; 
            border-color: transparent;
        }
        .tech-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .tech-card.active {
            background-color: #fff;
            border-bottom-color: var(--theme-color);
            box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.05);
        }

        /* Simulation Canvas */
        #sim-container {
            position: relative;
            width: 100%;
            height: 160px;
            background: #0f172a; /* Slate-900 */
            border-radius: 8px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.3);
        }
        #simCanvas { width: 100%; height: 100%; display: block; }
        
        /* Code Block Styles */
        .code-window {
            background: #1e293b;
            border-radius: 8px;
            padding: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            color: #e2e8f0;
            overflow-x: auto;
            border: 1px solid #334155;
            line-height: 1.6;
        }
        .kw { color: #c678dd; } /* Keyword */
        .str { color: #98c379; } /* String */
        .fn { color: #61afef; } /* Function */
        .comment { color: #94a3b8; font-style: italic; display: inline-block; margin-left: 10px; } /* Comments */

        /* Animation */
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Badges */
        .badge-link {
            transition: all 0.2s;
        }
        .badge-link:hover {
            transform: translateX(2px);
            text-decoration: underline;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
    </style>
</head>
<body class="selection:bg-indigo-100 selection:text-indigo-900">

    <!-- Compact Nav -->
    <nav class="bg-white/80 backdrop-blur border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 h-14 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <span class="text-xl">ğŸ‘¨â€ğŸ’»</span>
                <span class="font-bold text-slate-800">æŠ€æœ¯æ ˆé€è§† (å®æˆ˜ç‰ˆ)</span>
            </div>
            <div class="flex space-x-6 text-sm font-medium">
                <button onclick="switchTab('dashboard')" id="btn-dashboard" class="text-indigo-600">å…¨æ™¯æ¦‚è§ˆ</button>
                <button onclick="switchTab('lang-map')" id="btn-lang-map" class="text-slate-500 hover:text-slate-800">è¯­è¨€ç‰ˆå›¾</button>
                <button onclick="switchTab('compare')" id="btn-compare" class="text-slate-500 hover:text-slate-800">ç¡¬æ ¸å¯¹æ¯”</button>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 py-6">

        <!-- DASHBOARD VIEW -->
        <div id="view-dashboard" class="fade-in space-y-6">
            
            <!-- [NEW] 1. Hero Section -->
            <div class="bg-gradient-to-r from-indigo-600 to-blue-500 rounded-xl p-8 text-white shadow-lg relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl transform rotate-12 pointer-events-none">ğŸ—ºï¸</div>
                <h1 class="text-3xl font-bold mb-2">ç¼–ç¨‹ä¸–ç•Œçš„ç¬¬ä¸€å¼ åœ°å›¾</h1>
                <p class="text-blue-100 text-lg max-w-2xl">åˆ«è®©â€œé€‰æ‹©å›°éš¾ç—‡â€é˜»æŒ¡ä½ çš„ä»£ç ä¹‹è·¯ã€‚ç‚¹å‡»ä¸‹æ–¹å¡ç‰‡ï¼Œçœ‹æ¸…æ¯ä¸ªæŠ€æœ¯æ ˆçš„çœŸå®é¢ç›®ã€‚</p>
            </div>

            <!-- Tech Selector (Top Row) -->
            <div class="grid grid-cols-3 sm:grid-cols-6 gap-3" id="tech-grid">
                <!-- Injected via JS -->
            </div>

            <!-- Main Detail Area (Split Layout) -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6" id="detail-panel">
                
                <!-- LEFT COLUMN: Visuals & Code (The "What") -->
                <div class="lg:col-span-7 space-y-4">
                    <!-- Header -->
                    <div class="flex items-center justify-between bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                        <div class="flex items-center gap-3">
                            <span class="text-4xl" id="detail-icon">âš›ï¸</span>
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800 leading-tight" id="detail-title">React</h2>
                                <div class="text-xs font-bold uppercase tracking-wider text-slate-400" id="detail-type">Frontend</div>
                            </div>
                        </div>
                        <div class="text-right">
                             <div class="text-xs text-slate-400 mb-1">åº•å±‚é€»è¾‘</div>
                             <div class="text-sm font-medium text-slate-700 bg-slate-100 px-2 py-1 rounded" id="detail-logic-tag">Virtual DOM</div>
                        </div>
                    </div>

                    <!-- Visual Simulation -->
                    <div id="sim-container">
                        <canvas id="simCanvas"></canvas>
                        <div class="absolute bottom-2 right-3 text-xs text-white/50 bg-black/40 px-2 py-1 rounded pointer-events-none">
                            è¿è¡Œæœºåˆ¶å¯è§†åŒ–
                        </div>
                    </div>

                    <!-- Code Reality Check -->
                    <div class="relative group">
                        <div class="absolute -top-3 left-4 bg-indigo-600 text-white text-xs font-bold px-2 py-0.5 rounded shadow-sm z-10">
                            ä»£ç çœŸå®¹ (å¸¦äººè¯æ³¨é‡Š)
                        </div>
                        <div class="code-window" id="detail-code">
                            <!-- Code injected here -->
                        </div>
                    </div>

                    <!-- Use Cases (Concrete) -->
                    <div class="bg-white p-4 rounded-xl border border-slate-200">
                        <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-3">ğŸ“± çœŸå®åº”ç”¨ä¸¾ä¾‹ (æˆ‘å­¦ä¼šèƒ½åšå•¥ï¼Ÿ)</h4>
                        <div class="flex flex-wrap gap-3" id="detail-cases">
                            <!-- Cases injected -->
                        </div>
                    </div>
                </div>

                <!-- RIGHT COLUMN: The "How" (Learning Path & Reality) -->
                <div class="lg:col-span-5 space-y-4">
                    
                    <!-- Reality Card -->
                    <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200 h-full flex flex-col">
                        
                        <!-- Learning Path (Actionable) -->
                        <div class="mb-6 bg-gradient-to-r from-indigo-50 to-blue-50 p-4 rounded-lg border border-indigo-100">
                            <h4 class="text-sm font-bold text-indigo-800 mb-3 flex items-center">
                                ğŸ“ å…è´¹å­¦ä¹ è·¯çº¿ (äº²æµ‹æ¨è)
                            </h4>
                            <div class="space-y-2" id="detail-path">
                                <!-- Links injected -->
                            </div>
                        </div>

                        <!-- Time Estimate -->
                        <div class="mb-6">
                            <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-2">â±ï¸ å­¦ä¹ æ—¶é—´é¢„ä¼°</h4>
                            <div class="bg-slate-50 p-3 rounded border border-slate-100 text-sm">
                                <span class="font-bold text-slate-700" id="detail-time">...</span>
                            </div>
                        </div>

                        <!-- Setup Pain -->
                        <div class="mb-6">
                            <div class="flex justify-between items-end mb-2">
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wide">ç¯å¢ƒé…ç½®ç—›è‹¦æŒ‡æ•°</h4>
                                <span class="text-xs font-bold" id="detail-setup-text">ä¸­ç­‰</span>
                            </div>
                            <div class="w-full bg-slate-100 rounded-full h-2.5">
                                <div id="detail-setup-bar" class="h-2.5 rounded-full transition-all duration-500" style="width: 40%"></div>
                            </div>
                            <p class="text-xs text-slate-500 mt-2 italic" id="detail-setup-desc">...</p>
                        </div>

                        <!-- Pros/Cons Compact -->
                        <div class="mt-auto pt-4 border-t border-slate-100 grid grid-cols-2 gap-4">
                            <div>
                                <div class="text-emerald-600 font-bold text-sm mb-1">ğŸ‘ çˆ½ç‚¹</div>
                                <ul class="text-xs text-slate-600 space-y-1 list-disc list-inside" id="detail-pros"></ul>
                            </div>
                            <div>
                                <div class="text-rose-500 font-bold text-sm mb-1">ğŸ‘ å‘ç‚¹</div>
                                <ul class="text-xs text-slate-600 space-y-1 list-disc list-inside" id="detail-cons"></ul>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- LANGUAGE MAP VIEW -->
        <div id="view-lang-map" class="hidden fade-in">
             <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200 relative mb-6">
                 <h2 class="text-lg font-bold text-slate-800 absolute top-4 left-4 z-10 bg-white/80 px-2 rounded">
                     å­¦ä¹ æ›²çº¿ vs è¿è¡Œæ€§èƒ½
                 </h2>
                 <div class="h-[400px]">
                    <canvas id="scatterChart"></canvas>
                 </div>
             </div>
             
             <!-- [NEW] 3. Chart Context (Quadrants) -->
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                 <div class="p-4 bg-emerald-50 border border-emerald-100 rounded-xl">
                     <h4 class="font-bold text-emerald-800 mb-1 flex items-center"><span class="mr-2">ğŸŸ¢</span>æ–°æ‰‹å¿«ä¹åŒº</h4>
                     <p class="text-xs text-emerald-700 leading-relaxed">å³ä¸‹è§’åŒºåŸŸ (Python, JS)ã€‚<br><strong>ç‰¹ç‚¹ï¼š</strong>è¯­æ³•æå…¶ç®€å•ï¼Œåƒè¯»è‹±è¯­ä¸€æ ·ã€‚è™½ç„¶è¿è¡Œé€Ÿåº¦ä¸æ˜¯æœ€å¿«ï¼Œä½†å¼€å‘æ•ˆç‡æé«˜ï¼Œé€‚åˆå¿«é€Ÿä¸Šæ‰‹ã€‚</p>
                 </div>
                 <div class="p-4 bg-sky-50 border border-sky-100 rounded-xl">
                     <h4 class="font-bold text-sky-800 mb-1 flex items-center"><span class="mr-2">ğŸ”µ</span>äº‘ç«¯é«˜è–ªåŒº</h4>
                     <p class="text-xs text-sky-700 leading-relaxed">ä¸Šæ–¹åŒºåŸŸ (Go, Java)ã€‚<br><strong>ç‰¹ç‚¹ï¼š</strong>ä¼ä¸šçº§åç«¯é¦–é€‰ã€‚ä¸ä»…å¿«ï¼Œè€Œä¸”ç¨³ã€‚å¹¶å‘èƒ½åŠ›å¼ºï¼Œèƒ½å¤„ç†æµ·é‡ç”¨æˆ·è¯·æ±‚ï¼Œå¤§å‚å¿…å¤‡æŠ€èƒ½ã€‚</p>
                 </div>
                 <div class="p-4 bg-indigo-50 border border-indigo-100 rounded-xl">
                     <h4 class="font-bold text-indigo-800 mb-1 flex items-center"><span class="mr-2">ğŸŸ£</span>å…¨èƒ½å¹³è¡¡åŒº</h4>
                     <p class="text-xs text-indigo-700 leading-relaxed">ä¸­é—´åŒºåŸŸ (Dart/Flutter, Vue)ã€‚<br><strong>ç‰¹ç‚¹ï¼š</strong>åœ¨å­¦ä¹ éš¾åº¦å’Œæ€§èƒ½ä¹‹é—´æ‰¾åˆ°äº†æä½³çš„å¹³è¡¡ç‚¹ã€‚é€šå¸¸ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼Œå…¼é¡¾å¼€å‘çˆ½æ„Ÿå’Œç”¨æˆ·ä½“éªŒã€‚</p>
                 </div>
                 <div class="p-4 bg-rose-50 border border-rose-100 rounded-xl">
                     <h4 class="font-bold text-rose-800 mb-1 flex items-center"><span class="mr-2">ğŸ”´</span>ç¡¬æ ¸å¤§ç¥åŒº</h4>
                     <p class="text-xs text-rose-700 leading-relaxed">å·¦ä¸Šè§’åŒºåŸŸ (C++, Rust)ã€‚<br><strong>ç‰¹ç‚¹ï¼š</strong>æ€§èƒ½æå…¶ææ€–ï¼Œä½†å­¦ä¹ æ›²çº¿é™¡å³­ã€‚éœ€è¦è‡ªå·±ç®¡ç†å†…å­˜ï¼Œé€‚åˆåšæ¸¸æˆå¼•æ“ã€æ“ä½œç³»ç»Ÿç­‰åº•å±‚è®¾æ–½ã€‚</p>
                 </div>
             </div>
        </div>

        <!-- COMPARATOR VIEW -->
        <div id="view-compare" class="hidden fade-in space-y-4">
            <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-200">
                <div class="flex gap-4 mb-6">
                    <select id="compare-select-1" class="flex-1 p-2 border rounded bg-slate-50 font-bold text-slate-700"></select>
                    <span class="self-center font-bold text-slate-300">VS</span>
                    <select id="compare-select-2" class="flex-1 p-2 border rounded bg-slate-50 font-bold text-slate-700"></select>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm">
                        <thead class="bg-slate-50 text-slate-500 border-b border-slate-200">
                            <tr>
                                <th class="p-3 w-1/6">ç»´åº¦</th>
                                <th class="p-3 w-5/12" id="th-name-1">A</th>
                                <th class="p-3 w-5/12" id="th-name-2">B</th>
                            </tr>
                        </thead>
                        <tbody id="compare-tbody" class="divide-y divide-slate-100">
                            <!-- Rows injected -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </main>

    <!-- [NEW] 4. Footer -->
    <footer class="bg-slate-900 text-slate-400 py-8 mt-12 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-bold text-slate-200 mb-2">Â© 2025 æ–°æ‰‹æŠ€æœ¯æ ˆé€è§†æŒ‡å—</p>
            <p class="text-xs text-slate-500 max-w-lg mx-auto leading-relaxed">
                å…è´£å£°æ˜ï¼šå­¦ä¹ æ—¶é—´ä¸è–ªèµ„å‰æ™¯ä»…ä¾›å‚è€ƒï¼Œå…·ä½“å–å†³äºä¸ªäººæŠ•å…¥ç¨‹åº¦ä¸å¸‚åœºç¯å¢ƒã€‚
                <br>ç¼–ç¨‹æ˜¯ä¸€åœºé©¬æ‹‰æ¾ï¼Œæ‰¾åˆ°é€‚åˆè‡ªå·±çš„èŠ‚å¥æœ€é‡è¦ã€‚
            </p>
        </div>
    </footer>

    <script>
        const techData = [
            {
                id: "react",
                name: "React + Node",
                shortName: "React",
                color: "#38bdf8", 
                type: "å…¨æ ˆ JS",
                logicTag: "Virtual DOM",
                codeSnippet: `<span class="kw">function</span> <span class="fn">Welcome</span>() {\n  <span class="comment">// å°±åƒæ­ç§¯æœ¨ï¼Œè¿™æ˜¯ä¸€ä¸ª"æ¬¢è¿"ç»„ä»¶</span>\n  <span class="kw">return</span> &lt;h1&gt;<span class="str">Hello World</span>&lt;/h1&gt;;\n}`,
                setupDifficulty: 3, 
                setupDesc: "æ–°æ‰‹å¡å…³ç‚¹ï¼šnpm åŒ…ä¸‹è½½æ…¢ï¼ˆéœ€é…ç½®é•œåƒï¼‰ï¼ŒNode ç‰ˆæœ¬å†²çªã€‚",
                timeEstimate: "å…¥é—¨: 2å‘¨ | ç†Ÿç»ƒ: 2-3ä¸ªæœˆ",
                learningPaths: [
                    {name: "React å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ (å¿…çœ‹)", url: "https://zh-hans.react.dev/learn"},
                    {name: "freeCodeCamp å®æˆ˜æ•™ç¨‹", url: "https://www.freecodecamp.org/chinese/learn/front-end-development-libraries/#react"}
                ],
                useCases: ["çŸ¥ä¹ Webç‰ˆ", "Airbnb", "Netflix", "VS Code (Electron)"],
                pros: ["ç”Ÿæ€æå¯Œï¼Œé‡åˆ°é—®é¢˜ç™¾åº¦ä¸€ä¸‹å…¨æœ‰", "å­¦ä¼š JS å°±èƒ½é€šåƒå‰åç«¯"],
                cons: ["é…ç½®å¤æ‚ï¼Œæ–°æ‰‹å®¹æ˜“æ™•", "å·¥å…·æ›´æ–°å¤ªå¿«ï¼Œå‡ ä¸ªæœˆå˜ä¸€æ¬¡"],
                simType: "grid"
            },
            {
                id: "python",
                name: "Python",
                shortName: "Python",
                color: "#facc15", 
                type: "AI / è„šæœ¬",
                logicTag: "è§£é‡Šå‹è¯­è¨€",
                codeSnippet: `<span class="kw">print</span>(<span class="str">"Hello World"</span>) <span class="comment">// çœŸçš„å¾ˆç®€å•ï¼Œå°±ä¸€è¡Œ</span>\n\n<span class="comment">// ä¸€è¡Œä»£ç æŠŠæ•°å­—éƒ½ä¹˜2 (åˆ—è¡¨æ¨å¯¼å¼)</span>\ndata = [x*<span class="str">2</span> <span class="kw">for</span> x <span class="kw">in</span> range(<span class="str">10</span>)]`,
                setupDifficulty: 2,
                setupDesc: "æ–°æ‰‹å¡å…³ç‚¹ï¼špip ä¸‹è½½æ…¢ï¼Œconda ç¯å¢ƒé…ç½®ã€‚",
                timeEstimate: "è¯­æ³•: 1å‘¨ | çˆ¬è™«å°æˆ: 3å‘¨",
                learningPaths: [
                    {name: "å»–é›ªå³° Python æ•™ç¨‹ (ç»å…¸)", url: "https://www.liaoxuefeng.com/wiki/1016959663602400"},
                    {name: "Python å®˜æ–¹ä¸­æ–‡æ–‡æ¡£", url: "https://docs.python.org/zh-cn/3/tutorial/"}
                ],
                useCases: ["ChatGPT è®­ç»ƒè„šæœ¬", "æŠ¢ç¥¨è½¯ä»¶", "Instagram åç«¯", "æ•°æ®åˆ†ææŠ¥è¡¨"],
                pros: ["ä»£ç åƒè‹±è¯­ä¸€æ ·å¥½è¯»", "AI é¢†åŸŸæ²¡æœ‰å¯¹æ‰‹"],
                cons: ["è¿è¡Œé€Ÿåº¦æ…¢ï¼Œä¸é€‚åˆé«˜å¹¶å‘", "ç§»åŠ¨ç«¯å¼€å‘å‡ ä¹ä¸º 0"],
                simType: "pipeline"
            },
            {
                id: "java",
                name: "Java (Spring)",
                shortName: "Java",
                color: "#fb923c", 
                type: "ä¼ä¸šåç«¯",
                logicTag: "JVM",
                codeSnippet: `<span class="kw">public class</span> Main {\n  <span class="comment">// å¿…é¡»æœ‰ä¸ªä¸»å…¥å£ï¼Œæœ‰ç‚¹å•°å—¦</span>\n  <span class="kw">public static void</span> <span class="fn">main</span>(String[] args) {\n    System.out.println(<span class="str">"Hello"</span>);\n  }\n}`,
                setupDifficulty: 4,
                setupDesc: "æ–°æ‰‹å¡å…³ç‚¹ï¼šç¯å¢ƒå˜é‡ JAVA_HOMEï¼ŒMaven ä»“åº“é…ç½®ï¼ŒIDEA å®‰è£…ã€‚",
                timeEstimate: "Java SE: 1ä¸ªæœˆ | Webå…¨æ ˆ: 4ä¸ªæœˆ",
                learningPaths: [
                    {name: "éŸ©é¡ºå¹³é›¶åŸºç¡€ 30å¤© (Bç«™)", url: "https://www.bilibili.com/video/BV1fh411y7R8"},
                    {name: "Java å…¨æ ˆçŸ¥è¯†ä½“ç³»", url: "https://pdai.tech/"}
                ],
                useCases: ["æ·˜å®/äº¬ä¸œåå°", "æˆ‘çš„ä¸–ç•Œ (Minecraft)", "é“¶è¡Œäº¤æ˜“ç³»ç»Ÿ"],
                pros: ["ç±»å‹ä¸¥æ ¼ï¼Œå¤§å‹é¡¹ç›®ä¸å´©", "å¤šçº¿ç¨‹æ¨¡å‹æå…¶æˆç†Ÿ"],
                cons: ["ä»£ç å¤ªå•°å—¦ï¼Œå†™èµ·æ¥ç´¯", "å¯åŠ¨æ…¢ï¼Œå†…å­˜åƒå¾—ç´§"],
                simType: "fortress"
            },
            {
                id: "go",
                name: "Go (Golang)",
                shortName: "Go",
                color: "#06b6d4", 
                type: "äº‘åŸç”Ÿ",
                logicTag: "Goroutine",
                codeSnippet: `<span class="kw">package</span> main\n<span class="kw">import</span> <span class="str">"fmt"</span> <span class="comment">// å¯¼å…¥å·¥å…·åŒ…</span>\n\n<span class="kw">func</span> <span class="fn">main</span>() {\n  fmt.Println(<span class="str">"Hello"</span>) <span class="comment">// æ‰“å°</span>\n}`,
                setupDifficulty: 1,
                setupDesc: "æå…¶ç®€å•ï¼Œä¸‹è½½å®‰è£…åŒ…ï¼Œé…ä¸ª GOPATH å°±èƒ½è·‘ã€‚",
                timeEstimate: "ä¸Šæ‰‹: 1å‘¨ | å†™æœåŠ¡: 3å‘¨",
                learningPaths: [
                    {name: "Go è¯­è¨€ä¹‹æ—… (å®˜æ–¹äº’åŠ¨)", url: "https://tour.go-zh.org/welcome/1"},
                    {name: "Go By Example ä¸­æ–‡ç‰ˆ", url: "https://gobyexample-cn.github.io/"}
                ],
                useCases: ["Bilibili åç«¯", "Docker å®¹å™¨", "ä¸ƒç‰›äº‘å­˜å‚¨", "æŠ–éŸ³æ¶ˆæ¯æœåŠ¡"],
                pros: ["éƒ¨ç½²æå¿« (ç›´æ¥æ˜¯ä¸€ä¸ªæ–‡ä»¶)", "å¹¶å‘èƒ½åŠ›æå¼º (åç¨‹)"],
                cons: ["é”™è¯¯å¤„ç†å…¨æ˜¯ if err != nil", "æ³›å‹æ”¯æŒè¾ƒå¼±"],
                simType: "particles"
            },
            {
                id: "vue",
                name: "Vue.js",
                shortName: "Vue",
                color: "#4ade80", 
                type: "å‰ç«¯æ¡†æ¶",
                logicTag: "Reactive",
                codeSnippet: `&lt;script setup&gt;\n  <span class="comment">// å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ”¹å®ƒç•Œé¢å°±ä¼šå˜</span>\n  <span class="kw">const</span> msg = <span class="str">'Hi Vue'</span>\n&lt;/script&gt;\n&lt;template&gt;\n  &lt;div&gt;{{ msg }}&lt;/div&gt;\n&lt;/template&gt;`,
                setupDifficulty: 2,
                setupDesc: "Vite è„šæ‰‹æ¶ä¸€é”®ç”Ÿæˆï¼Œæ¯” Webpack ç®€å•å¤šäº†ã€‚",
                timeEstimate: "ä¸Šæ‰‹: 3å¤© | ç†Ÿç»ƒ: 3å‘¨",
                learningPaths: [
                    {name: "Vue å®˜æ–¹äº’åŠ¨æ•™ç¨‹ (è¶…èµ)", url: "https://cn.vuejs.org/tutorial/"},
                    {name: "å°šç¡…è°· Vue å…¨å®¶æ¡¶ (Bç«™)", url: "https://www.bilibili.com/video/BV1Zy4y1K7SH"}
                ],
                useCases: ["Bilibili åˆ›ä½œä¸­å¿ƒ", "é¥¿äº†ä¹ˆ H5", "å›½å†…å¤§éƒ¨åˆ†ç®¡ç†åå°"],
                pros: ["æ¨¡ç‰ˆè¯­æ³•ç®€å•ï¼Œç¬¦åˆç›´è§‰", "æ–‡æ¡£ä¸­æ–‡æå…¶å‹å¥½"],
                cons: ["å›½å¤–å¤§å‚ç”¨çš„å°‘", "TS æ”¯æŒä¸å¦‚ React å®Œç¾"],
                simType: "grid_vue"
            },
            {
                id: "flutter",
                name: "Flutter",
                shortName: "Flutter",
                color: "#6366f1", 
                type: "ç§»åŠ¨ç«¯",
                logicTag: "Skia Engine",
                codeSnippet: `Text(<span class="str">'Hello'</span>,\n  <span class="comment">// åƒæ­ç§¯æœ¨ä¸€æ ·è®¾ç½®æ ·å¼</span>\n  style: TextStyle(size: <span class="str">20</span>)\n);`,
                setupDifficulty: 5,
                setupDesc: "åœ°ç‹±çº§ã€‚Android SDK + Xcode + CocoaPodsï¼Œç½‘ä¸å¥½èƒ½é…ä¸€å¤©ã€‚",
                timeEstimate: "å…¥é—¨: 2å‘¨ | ç‹¬ç«‹App: 1.5ä¸ªæœˆ",
                learningPaths: [
                    {name: "Flutter å®˜æ–¹ä¸­æ–‡ç½‘", url: "https://flutter.cn/learn"},
                    {name: "Flutter å®æˆ˜ (ç”µå­ä¹¦)", url: "https://book.flutterchina.club/"}
                ],
                useCases: ["é—²é±¼ App", "é“¾å®¶ App", "Google Pay", "BMW æ±½è½¦è½¦æœº"],
                pros: ["å†™ä¸€å¥—ä»£ç è·‘ä¸¤ç«¯ (iOS/And)", "æ¸²æŸ“æ€§èƒ½æ¥è¿‘åŸç”Ÿ"],
                cons: ["åŒ…ä½“ç§¯å¤§", "åŸç”ŸåŠŸèƒ½è¿˜è¦å†™æ’ä»¶"],
                simType: "dual"
            }
        ];

        // --- SIMULATION ENGINE (Fixed & Robust) ---
        let simCtx = null;
        let simCanvas = null;
        let simAnimationId = null;
        
        // Use a state object to manage resize consistency
        let simState = {
            width: 0,
            height: 0,
            frame: 0,
            particles: [],
            currentType: null,
            currentColor: null
        };

        function initSimulation() {
            simCanvas = document.getElementById('simCanvas');
            if(simCanvas) {
                simCtx = simCanvas.getContext('2d');
                resizeSimulation();
                window.addEventListener('resize', resizeSimulation);
            }
        }

        function resizeSimulation() {
            if (!simCanvas) return;
            const container = document.getElementById('sim-container');
            // Ensure we use client sizes to match CSS display size
            simCanvas.width = container.clientWidth;
            simCanvas.height = container.clientHeight;
            simState.width = simCanvas.width;
            simState.height = simCanvas.height;
        }

        function startSimulation(type, color) {
            // Cancel previous loop
            if (simAnimationId) cancelAnimationFrame(simAnimationId);
            
            // Re-calculate dims just in case
            if(!simCanvas) initSimulation();
            resizeSimulation();

            simState.currentType = type;
            simState.currentColor = color;
            simState.particles = [];
            simState.frame = 0;

            const w = simState.width;
            const h = simState.height;

            // Init particles based on type
            if (type === 'particles') { // Go
                for(let i=0; i<40; i++) simState.particles.push({x: Math.random()*w, y: Math.random()*h, s: 2+Math.random()*3});
            } else if (type === 'fortress') { // Java
                for(let i=0; i<15; i++) simState.particles.push({x: Math.random()*w, y: Math.random()*h, vx: (Math.random()-0.5), vy: (Math.random()-0.5)});
            } else if (type === 'pipeline') { // Python
                for(let i=0; i<3; i++) simState.particles.push({x: i * (w/3), step: i});
            }
            // grid, grid_vue, dual don't need persistent particles array

            draw();
        }

        function draw() {
            if(!simCtx) return;
            
            const w = simState.width;
            const h = simState.height;
            const type = simState.currentType;
            const color = simState.currentColor;

            // Clear Background
            simCtx.fillStyle = '#0f172a';
            simCtx.fillRect(0, 0, w, h);
            simState.frame++;

            if (type === 'particles') {
                // Go: High Concurrency
                simCtx.fillStyle = color;
                simState.particles.forEach(p => {
                    p.x += p.s * 2;
                    if(p.x > w) p.x = 0;
                    simCtx.beginPath(); simCtx.arc(p.x, p.y, 2, 0, Math.PI*2); simCtx.fill();
                });
                simCtx.fillStyle = '#fff'; simCtx.font = "12px sans-serif"; simCtx.fillText("Go: æé€Ÿå¹¶å‘ (åç¨‹)", 10, 20);
            } 
            else if (type === 'fortress') {
                // Java: Stability
                simCtx.fillStyle = '#334155';
                simCtx.fillRect(w/2-25, h/2-25, 50, 50); // Server Box
                simCtx.fillStyle = color;
                simState.particles.forEach(p => {
                    p.x += p.vx; p.y += p.vy;
                    // Bounce off walls
                    if(p.x < 0 || p.x > w) p.vx *= -1;
                    if(p.y < 0 || p.y > h) p.vy *= -1;
                    // Bounce off box
                    if(p.x > w/2-30 && p.x < w/2+30 && p.y > h/2-30 && p.y < h/2+30) { p.vx *= -1; p.vy *= -1; }
                    simCtx.beginPath(); simCtx.arc(p.x, p.y, 3, 0, Math.PI*2); simCtx.fill();
                });
                simCtx.fillStyle = '#fff'; simCtx.font = "12px sans-serif"; simCtx.fillText("Java: æ¶æ„ç¨³å¥ (JVM)", 10, 20);
            }
            else if (type === 'pipeline') {
                // Python: Sequential Processing
                const speed = 2;
                simState.particles.forEach(p => {
                    p.x += speed;
                    if(p.x > w + 50) p.x = -50;
                    simCtx.fillStyle = p.x > w/2 ? '#4ade80' : color;
                    simCtx.fillRect(p.x, h/2-10, 20, 20);
                    // Connector line
                    simCtx.strokeStyle = '#334155'; simCtx.beginPath(); simCtx.moveTo(0, h/2); simCtx.lineTo(w, h/2); simCtx.stroke();
                });
                simCtx.fillStyle = '#fff'; simCtx.font = "12px sans-serif"; simCtx.fillText("Python: ç®€å•æµå¼å¤„ç†", 10, 20);
            }
            else if (type === 'grid' || type === 'grid_vue') {
                // React/Vue: Grid
                const cols = 4; const rows = 2;
                const cellW = 30; const gap = 10;
                // Center grid based on CURRENT width
                const startX = (w - (cols*cellW + (cols-1)*gap))/2;
                const startY = (h - (rows*cellW + (rows-1)*gap))/2;

                for(let r=0; r<rows; r++) {
                    for(let c=0; c<cols; c++) {
                        const isFlash = Math.floor(simState.frame/40) % (rows*cols) === (r*cols+c);
                        simCtx.fillStyle = isFlash ? color : '#1e293b';
                        simCtx.fillRect(startX + c*(cellW+gap), startY + r*(cellW+gap), cellW, cellW);
                    }
                }
                simCtx.fillStyle = '#fff'; simCtx.font = "12px sans-serif"; simCtx.fillText(type === 'grid' ? "React: è™šæ‹Ÿ DOM" : "Vue: å“åº”å¼æ›´æ–°", 10, 20);
            }
            else if (type === 'dual') {
                // Flutter: Dual Screen
                const pw = 25; const ph = 45;
                const cx = w/2; const cy = h/2;
                simCtx.strokeStyle = color; simCtx.lineWidth=2;
                simCtx.strokeRect(cx-30-pw, cy-ph/2, pw, ph);
                simCtx.strokeRect(cx+30, cy-ph/2, pw, ph);
                
                const s = 5 + Math.sin(simState.frame/20)*5;
                simCtx.fillStyle = color;
                simCtx.beginPath(); simCtx.arc(cx-30-pw/2, cy, s, 0, Math.PI*2); simCtx.fill();
                simCtx.beginPath(); simCtx.arc(cx+30+pw/2, cy, s, 0, Math.PI*2); simCtx.fill();
                simCtx.fillStyle = '#fff'; simCtx.font = "12px sans-serif"; simCtx.fillText("Flutter: åŒç«¯ä¸€è‡´", 10, 20);
            }

            simAnimationId = requestAnimationFrame(draw);
        }

        // --- OTHER LOGIC (Charts, Tabs, etc) ---
        let currentScatterChart = null;

        // Init
        window.addEventListener('DOMContentLoaded', () => {
            renderTechGrid();
            renderComparators();
            
            // Initialize simulation system properly
            initSimulation();
            
            // Start default
            selectTech('react'); 
            
            renderScatterChart();
        });

        // ... (Remaining Logic for TechGrid, SelectTech, Charts is same as before, 
        // just ensuring selectTech calls the NEW startSimulation) ...

        function renderTechGrid() {
            const grid = document.getElementById('tech-grid');
            grid.innerHTML = techData.map(t => `
                <div class="tech-card bg-white p-3 rounded-lg border border-slate-200 text-center" 
                     onclick="selectTech('${t.id}')" data-id="${t.id}"
                     style="--theme-color: ${t.color}">
                    <div class="text-2xl mb-1">${getIcon(t.id)}</div>
                    <div class="font-bold text-slate-700 text-xs">${t.shortName}</div>
                </div>
            `).join('');
        }

        function selectTech(id) {
            document.querySelectorAll('.tech-card').forEach(el => el.classList.remove('active'));
            document.querySelector(`[data-id="${id}"]`).classList.add('active');

            const data = techData.find(t => t.id === id);

            document.getElementById('detail-title').innerText = data.name;
            document.getElementById('detail-icon').innerText = getIcon(data.id);
            document.getElementById('detail-type').innerText = data.type;
            document.getElementById('detail-logic-tag').innerText = data.logicTag;
            document.getElementById('detail-code').innerHTML = `<pre>${data.codeSnippet}</pre>`;

            const caseContainer = document.getElementById('detail-cases');
            caseContainer.innerHTML = data.useCases.map(c => 
                `<span class="bg-indigo-50 text-indigo-700 px-2 py-1 rounded text-xs border border-indigo-100 font-medium">${c}</span>`
            ).join('');

            const pathContainer = document.getElementById('detail-path');
            pathContainer.innerHTML = data.learningPaths.map(p => 
                `<a href="${p.url}" target="_blank" class="badge-link flex items-center justify-between bg-white border border-indigo-200 p-2 rounded text-xs text-indigo-600 font-medium hover:bg-indigo-50 hover:shadow-sm">
                    <span>${p.name}</span>
                    <span>â†—</span>
                 </a>`
            ).join('');

            document.getElementById('detail-time').innerText = data.timeEstimate;
            document.getElementById('detail-setup-desc').innerText = data.setupDesc;
            const bar = document.getElementById('detail-setup-bar');
            bar.style.width = (data.setupDifficulty * 20) + '%';
            
            let painColor = 'bg-emerald-500';
            let painText = 'ç®€å•';
            if(data.setupDifficulty >= 3) { painColor = 'bg-amber-400'; painText = 'ä¸­ç­‰'; }
            if(data.setupDifficulty >= 5) { painColor = 'bg-rose-500'; painText = 'åœ°ç‹±çº§'; }
            
            bar.className = `h-2.5 rounded-full transition-all duration-500 ${painColor}`;
            document.getElementById('detail-setup-text').innerText = painText;
            document.getElementById('detail-setup-text').className = `text-xs font-bold ${painColor.replace('bg-', 'text-')}`;

            document.getElementById('detail-pros').innerHTML = data.pros.map(p => `<li>${p}</li>`).join('');
            document.getElementById('detail-cons').innerHTML = data.cons.map(c => `<li>${c}</li>`).join('');

            // Call the robust startSimulation
            startSimulation(data.simType, data.color);
        }

        function getIcon(id) {
            const map = { react: 'âš›ï¸', python: 'ğŸ', java: 'â˜•', go: 'ğŸ¹', vue: 'ğŸŸ©', flutter: 'ğŸ“±' };
            return map[id] || 'â“';
        }

        function switchTab(viewId) {
            ['dashboard', 'lang-map', 'compare'].forEach(id => {
                document.getElementById(`view-${id}`).classList.add('hidden');
                document.getElementById(`btn-${id}`).classList.remove('text-indigo-600', 'font-bold');
                document.getElementById(`btn-${id}`).classList.add('text-slate-500');
            });
            document.getElementById(`view-${viewId}`).classList.remove('hidden');
            document.getElementById(`btn-${viewId}`).classList.add('text-indigo-600', 'font-bold');
            document.getElementById(`btn-${viewId}`).classList.remove('text-slate-500');
            
            if(viewId === 'lang-map' && currentScatterChart) currentScatterChart.resize();
        }

        function renderScatterChart() {
            const ctx = document.getElementById('scatterChart').getContext('2d');
            const data = [
                {x: 8, y: 5, r: 15, label: 'JS/Node'},
                {x: 10, y: 3, r: 15, label: 'Python'},
                {x: 5, y: 7, r: 15, label: 'Java'},
                {x: 6, y: 9, r: 15, label: 'Go'},
                {x: 9, y: 6, r: 15, label: 'Vue'},
                {x: 4, y: 8, r: 15, label: 'Flutter/Dart'},
                {x: 2, y: 10, r: 10, label: 'C++/Rust'}, // Added for context logic
                {x: 6, y: 6, r: 10, label: 'Dart/TS'}    // Added for context logic
            ];
            currentScatterChart = new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Tech',
                        data: data,
                        backgroundColor: (ctx) => {
                            const v = ctx.raw;
                            if(!v) return '#333';
                            // Logic to match quadrants loosely for demo
                            if(v.x > 7 && v.y < 6) return '#10b98180'; // Emerald (Beginner)
                            if(v.x < 5 && v.y > 7) return '#f43f5e80'; // Rose (Hardcore)
                            if(v.y > 7 && v.x > 4) return '#0ea5e980'; // Sky (Cloud)
                            return '#6366f180'; // Indigo (Balanced)
                        },
                        borderColor: (ctx) => {
                            const v = ctx.raw;
                            if(!v) return '#333';
                             if(v.x > 7 && v.y < 6) return '#10b981'; 
                            if(v.x < 5 && v.y > 7) return '#f43f5e'; 
                            if(v.y > 7 && v.x > 4) return '#0ea5e9'; 
                            return '#6366f1'; 
                        },
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: {
                        x: { title: {display: true, text: 'å­¦ä¹ å®¹æ˜“åº¦ (Easy ->)'}, min: 1, max: 11 },
                        y: { title: {display: true, text: 'è¿è¡Œæ€§èƒ½ (Fast ->)'}, min: 1, max: 11 }
                    },
                    plugins: { legend: {display: false}, tooltip: { callbacks: { label: (ctx) => ctx.raw.label } } }
                },
                plugins: [{
                    id: 'labels',
                    afterDatasetsDraw(chart) {
                        const ctx = chart.ctx;
                        chart.data.datasets[0].data.forEach((d, i) => {
                            const meta = chart.getDatasetMeta(0);
                            const pos = meta.data[i].tooltipPosition();
                            if(pos && pos.x !== undefined && pos.y !== undefined) {
                                ctx.fillStyle = '#334155'; ctx.font = '12px sans-serif'; ctx.textAlign = 'center';
                                ctx.fillText(d.label, pos.x, pos.y + 25);
                            }
                        });
                    }
                }]
            });
        }

        function renderComparators() {
            const opts = techData.map(t => `<option value="${t.id}">${t.shortName}</option>`).join('');
            const s1 = document.getElementById('compare-select-1');
            const s2 = document.getElementById('compare-select-2');
            s1.innerHTML = opts; s2.innerHTML = opts;
            s2.value = 'java'; 
            
            const updateComp = () => {
                const t1 = techData.find(t => t.id === s1.value);
                const t2 = techData.find(t => t.id === s2.value);
                document.getElementById('th-name-1').innerText = t1.name;
                document.getElementById('th-name-2').innerText = t2.name;
                
                const rows = [
                    { name: 'ä»£ç çœŸå®¹', v1: `<code class="text-xs bg-slate-100 p-1 rounded block w-full overflow-x-auto">${t1.codeSnippet}</code>`, v2: `<code class="text-xs bg-slate-100 p-1 rounded block w-full overflow-x-auto">${t2.codeSnippet}</code>` },
                    { name: 'å­¦ä¹ æ—¶é—´', v1: t1.timeEstimate, v2: t2.timeEstimate },
                    { name: 'é…ç½®éš¾åº¦', v1: 'â­'.repeat(t1.setupDifficulty), v2: 'â­'.repeat(t2.setupDifficulty) },
                    { name: 'å…¸å‹åº”ç”¨', v1: t1.useCases.join(', '), v2: t2.useCases.join(', ') }
                ];
                
                document.getElementById('compare-tbody').innerHTML = rows.map(r => `
                    <tr class="border-b border-slate-50 last:border-0">
                        <td class="p-3 text-xs font-bold text-slate-400 uppercase">${r.name}</td>
                        <td class="p-3 text-slate-700">${r.v1}</td>
                        <td class="p-3 text-slate-700 border-l border-slate-50">${r.v2}</td>
                    </tr>
                `).join('');
            };
            s1.addEventListener('change', updateComp);
            s2.addEventListener('change', updateComp);
            updateComp();
        }

    </script>
</body>
</html>
